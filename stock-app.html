<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/iron-icons/iron-icons.html">
<link rel="import" href="bower_components/iron-icon/iron-icon.html">
<link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="portfolio-form.html">
<link rel="import" href="portfolio-element.html">

<dom-module id="stock-app">
  <template>
    <style>
      paper-header-panel {
        height: 100%; 
      }
      .menu-bar {
        background-color: lightblue;
      }
      .component {
        margin: 5px;
      }
    </style>
     <paper-header-panel flex>
       <paper-toolbar class="menu-bar">
          <iron-icon icon="home" on-click="showPortfolioList"></iron-icon>
          <iron-icon-button class="smaller" icon="add" on-click="addNewPortfolio">
           New Portfolio
          </iron-icon-button>
       </paper-toolbar>
       <template if="{{addPortfolio}}">
         <portfolio-form class="component" on-validportfolio="updatePortfolioList"></portfolio-form>
       </template>
       <template if="{{!addPortfolio}}">
          <template repeat="{{portfolio in portfolios}}">
            <portfolio-element portfolio="{{portfolio}}"></portfolio-element>
          </template>
       </template>
     </paper-header-panel>
  </template>
  <script type="application/javascript">
  Polymer({
    is: "stock-app",
    observers: [
      'addNewPortfolio()'
    ],
    ready: function() {
      this.addPortfolio = false;
      this.portfolios = [];
    },
    addNewPortfolio: function() {
      this.addPortfolio = true;
    },
    updatePortfolioList: function(obj, pfolio) {
      console.log(pfolio);
      this.portfolios.push(pfolio);
    },
  });
  </script>
</dom-module>
